{% extends "base.html" %}

{% block title %}–†–µ—à–µ–Ω–∏–µ –∑–∞–¥–∞–Ω–∏—è - –°–∏—Å—Ç–µ–º–∞ –∑–∞–¥–∞–Ω–∏–π Python{% endblock %}

{% block content %}
<div class="row">
    <div class="col-lg-8 mx-auto">
        <!-- –ó–∞–¥–∞–Ω–∏–µ -->
        <div class="card mb-4">
            <div class="card-header">
                <h4 class="mb-0">üìù –ó–∞–¥–∞–Ω–∏–µ</h4>
            </div>
            <div class="card-body">
                <div class="mb-3">
                    <h5>{{ task.title }}</h5>
                    <span class="badge bg-{{ 'success' if task.difficulty == 'easy' else 'warning' if task.difficulty == 'medium' else 'danger' }}">
                        {{ task.difficulty }}
                    </span>
                    <span class="badge bg-secondary ms-2">{{ task.category }}</span>
                </div>
                
                <div class="mb-3">
                    <h6>–û–ø–∏—Å–∞–Ω–∏–µ:</h6>
                    <p>{{ task.description }}</p>
                </div>
                
                <div class="mb-3">
                    <h6>–¢–µ—Å—Ç–æ–≤—ã–µ —Å–ª—É—á–∞–∏:</h6>
                    <div class="table-responsive">
                        <table class="table table-sm">
                            <thead>
                                <tr>
                                    <th>–í—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ</th>
                                    <th>–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç</th>
                                </tr>
                            </thead>
                            <tbody>
                                {% for test in task.test_cases %}
                                <tr>
                                    <td><code>{{ test.input }}</code></td>
                                    <td><code>{{ test.expected }}</code></td>
                                </tr>
                                {% endfor %}
                            </tbody>
                        </table>
                    </div>
                </div>
                
                <div class="mb-3">
                    <h6>–ü–æ–¥—Å–∫–∞–∑–∫–∏:</h6>
                    <div class="accordion" id="hintsAccordion">
                        {% for hint in task.hints %}
                        <div class="accordion-item">
                            <h2 class="accordion-header" id="hint{{ loop.index }}">
                                <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapse{{ loop.index }}">
                                    –ü–æ–¥—Å–∫–∞–∑–∫–∞ {{ loop.index }}
                                </button>
                            </h2>
                            <div id="collapse{{ loop.index }}" class="accordion-collapse collapse" data-bs-parent="#hintsAccordion">
                                <div class="accordion-body">
                                    {{ hint }}
                                </div>
                            </div>
                        </div>
                        {% endfor %}
                    </div>
                </div>
            </div>
        </div>

        <!-- –†–µ–¥–∞–∫—Ç–æ—Ä –∫–æ–¥–∞ -->
        <div class="card mb-4">
            <div class="card-header d-flex justify-content-between align-items-center">
                <h4 class="mb-0">üíª –†–µ—à–µ–Ω–∏–µ</h4>
                <button type="button" class="btn btn-outline-secondary btn-sm" onclick="clearCode()">
                    <i class="fas fa-eraser me-1"></i>–û—á–∏—Å—Ç–∏—Ç—å
                </button>
            </div>
            <div class="card-body">
                <div class="mb-3">
                    <label for="codeEditor" class="form-label">
                        <i class="fas fa-code me-2"></i>–í–∞—à –∫–æ–¥:
                    </label>
                    <textarea id="codeEditor" name="code" class="form-control code-textarea" style="height: 300px;" placeholder="# –í–≤–µ–¥–∏—Ç–µ –≤–∞—à–µ —Ä–µ—à–µ–Ω–∏–µ –∑–¥–µ—Å—å"></textarea>
                    <div id="editor" style="display: none;"></div>
                </div>
                
                <div class="text-center">
                    <button type="button" class="btn btn-success btn-lg" id="checkButton" onclick="checkSolution()">
                        <i class="fas fa-play me-2"></i>–ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–µ—à–µ–Ω–∏–µ
                    </button>
                    <button type="button" class="btn btn-outline-info btn-lg ms-2" onclick="showHint()" title="–ü–æ–∫–∞–∑–∞—Ç—å —Å—Ç—Ä—É–∫—Ç—É—Ä—É —Ä–µ—à–µ–Ω–∏—è">
                        <i class="fas fa-lightbulb me-2"></i>–ü–æ–¥—Å–∫–∞–∑–∫–∞
                    </button>
                </div>
            </div>
        </div>

        <!-- –†–µ–∑—É–ª—å—Ç–∞—Ç—ã -->
        <div id="results" style="display: none;">
            <!-- –†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è -->
            <div id="testResults" class="card mb-4">
                <div class="card-header">
                    <h4 class="mb-0">üß™ –†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è</h4>
                </div>
                <div class="card-body">
                    <div id="testResultsContent">
                        <!-- –†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ç–µ—Å—Ç–æ–≤ –±—É–¥—É—Ç –∑–∞–≥—Ä—É–∂–µ–Ω—ã –∑–¥–µ—Å—å -->
                    </div>
                </div>
            </div>

            <!-- –ê–Ω–∞–ª–∏–∑ –∫–æ–¥–∞ -->
            <div id="codeAnalysis" class="card mb-4">
                <div class="card-header">
                    <h4 class="mb-0">üìä –ê–Ω–∞–ª–∏–∑ –∫–∞—á–µ—Å—Ç–≤–∞ –∫–æ–¥–∞</h4>
                </div>
                <div class="card-body">
                    <div id="analysisContent">
                        <!-- –ê–Ω–∞–ª–∏–∑ –∫–æ–¥–∞ –±—É–¥–µ—Ç –∑–∞–≥—Ä—É–∂–µ–Ω –∑–¥–µ—Å—å -->
                    </div>
                </div>
            </div>

            <!-- –ò—Ç–æ–≥–æ–≤–∞—è –æ—Ü–µ–Ω–∫–∞ -->
            <div id="finalScore" class="card mb-4">
                <div class="card-header">
                    <h4 class="mb-0">üèÜ –ò—Ç–æ–≥–æ–≤–∞—è –æ—Ü–µ–Ω–∫–∞</h4>
                </div>
                <div class="card-body text-center">
                    <div id="scoreContent">
                        <!-- –ò—Ç–æ–≥–æ–≤–∞—è –æ—Ü–µ–Ω–∫–∞ –±—É–¥–µ—Ç –∑–∞–≥—Ä—É–∂–µ–Ω–∞ –∑–¥–µ—Å—å -->
                    </div>
                </div>
            </div>
        </div>

        <!-- –ó–∞–≥—Ä—É–∑–∫–∞ -->
        <div id="loading" style="display: none;" class="text-center">
            <div class="spinner-border text-primary" role="status">
                <span class="visually-hidden">–ü—Ä–æ–≤–µ—Ä—è–µ–º —Ä–µ—à–µ–Ω–∏–µ...</span>
            </div>
            <p class="mt-2">–ü—Ä–æ–≤–µ—Ä—è–µ–º –≤–∞—à–µ —Ä–µ—à–µ–Ω–∏–µ...</p>
        </div>
    </div>
</div>
{% endblock %}

{% block extra_js %}
<script>
    let codeEditor = null;
    let currentTaskId = '{{ task.id }}';
    let useCodeMirror = false;

    // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —Ä–µ–¥–∞–∫—Ç–æ—Ä–∞ –∫–æ–¥–∞
    document.addEventListener('DOMContentLoaded', function() {
        // –ü—ã—Ç–∞–µ–º—Å—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å CodeMirror
        if (typeof CodeMirror !== 'undefined') {
            try {
                const initialValue = document.getElementById('codeEditor').value;
                codeEditor = CodeMirror(document.getElementById('editor'), {
                    value: initialValue,
                    mode: 'python',
                    theme: 'default',
                    lineNumbers: true,
                    indentUnit: 4,
                    indentWithTabs: false,
                    lineWrapping: true,
                    autoCloseBrackets: true,
                    matchBrackets: true,
                    styleActiveLine: true,
                    foldGutter: true,
                    gutters: ["CodeMirror-linenumbers", "CodeMirror-foldgutter"]
                });
                
                // –°–∫—Ä—ã–≤–∞–µ–º textarea –∏ –ø–æ–∫–∞–∑—ã–≤–∞–µ–º CodeMirror
                document.getElementById('codeEditor').style.display = 'none';
                document.getElementById('editor').style.display = 'block';
                useCodeMirror = true;
                
                console.log('‚úÖ CodeMirror –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω');
            } catch (e) {
                console.log('‚ö†Ô∏è CodeMirror –Ω–µ —É–¥–∞–ª–æ—Å—å –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å:', e);
                useCodeMirror = false;
            }
        } else {
            console.log('‚ö†Ô∏è CodeMirror –Ω–µ –∑–∞–≥—Ä—É–∂–µ–Ω, –∏—Å–ø–æ–ª—å–∑—É–µ–º –æ–±—ã—á–Ω—ã–π textarea');
            useCodeMirror = false;
        }
        
        // –§–æ–∫—É—Å–∏—Ä—É–µ–º—Å—è –Ω–∞ —Ä–µ–¥–∞–∫—Ç–æ—Ä–µ
        if (useCodeMirror) {
            codeEditor.focus();
        } else {
            document.getElementById('codeEditor').focus();
        }
    });

    // –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –¥–ª—è –∫–Ω–æ–ø–∫–∏ –ø—Ä–æ–≤–µ—Ä–∫–∏
    document.getElementById('checkButton').addEventListener('click', function(e) {
        console.log('–ö–Ω–æ–ø–∫–∞ –Ω–∞–∂–∞—Ç–∞');
        e.preventDefault();
        e.stopPropagation();
        checkSolution();
        return false;
    });
    
    // –û–±—Ä–∞–±–æ—Ç—á–∏–∫ Enter+Ctrl –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏
    document.addEventListener('keydown', function(e) {
        if (e.ctrlKey && e.key === 'Enter') {
            e.preventDefault();
            checkSolution();
        }
    });

    function checkSolution() {
        console.log('=== –ù–ê–ß–ê–õ–û –ü–†–û–í–ï–†–ö–ò ===');
        
        // –ü–†–ê–í–ò–õ–¨–ù–û–ï –ø–æ–ª—É—á–µ–Ω–∏–µ –∫–æ–¥–∞: –∏–∑ CodeMirror –∏–ª–∏ textarea
        let code;
        if (useCodeMirror && codeEditor) {
            code = codeEditor.getValue();
            console.log('–ö–æ–¥ –∏–∑ CodeMirror');
        } else {
            code = document.getElementById('codeEditor').value;
            console.log('–ö–æ–¥ –∏–∑ textarea');
        }
        
        console.log('–î–ª–∏–Ω–∞ –∫–æ–¥–∞:', code.length);
        console.log('–ö–æ–¥:', code);
        
        // –£–ü–†–û–©–Å–ù–ù–ê–Ø –ü–†–û–í–ï–†–ö–ê - —Ç–æ–ª—å–∫–æ –¥–ª–∏–Ω–∞
        if (code.trim().length === 0) {
            alert('–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤–≤–µ–¥–∏—Ç–µ –∫–æ–¥ —Ä–µ—à–µ–Ω–∏—è.\n\n–ü–æ–ª–µ –¥–ª—è –∫–æ–¥–∞ –ø—É—Å—Ç–æ–µ!');
            if (useCodeMirror && codeEditor) {
                codeEditor.focus();
            } else {
                document.getElementById('codeEditor').focus();
            }
            return;
        }

        console.log('–û—Ç–ø—Ä–∞–≤–ª—è–µ–º –∫–æ–¥ –Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫—É');
        console.log('ID –∑–∞–¥–∞–Ω–∏—è:', currentTaskId);

        // –ü–æ–∫–∞–∑–∞—Ç—å –∑–∞–≥—Ä—É–∑–∫—É
        document.getElementById('loading').style.display = 'block';
        document.getElementById('results').style.display = 'none';

        // –û—Ç–ø—Ä–∞–≤–∏—Ç—å –∑–∞–ø—Ä–æ—Å –Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫—É
        const requestData = {
            task_id: currentTaskId,
            code: code
        };
        
        console.log('–î–∞–Ω–Ω—ã–µ –∑–∞–ø—Ä–æ—Å–∞:', requestData);
        
        fetch('/api/check-solution', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json',
            },
            body: JSON.stringify(requestData)
        })
        .then(response => {
            console.log('–û—Ç–≤–µ—Ç —Å–µ—Ä–≤–µ—Ä–∞:', response.status);
            return response.json();
        })
        .then(data => {
            console.log('–î–∞–Ω–Ω—ã–µ –æ—Ç–≤–µ—Ç–∞:', data);
            document.getElementById('loading').style.display = 'none';
            
            if (data.success) {
                displayResults(data);
            } else {
                alert('–û—à–∏–±–∫–∞ –ø—Ä–æ–≤–µ—Ä–∫–∏ —Ä–µ—à–µ–Ω–∏—è: ' + data.error);
            }
        })
        .catch(error => {
            document.getElementById('loading').style.display = 'none';
            console.error('–û—à–∏–±–∫–∞ –∑–∞–ø—Ä–æ—Å–∞:', error);
            alert('–ü—Ä–æ–∏–∑–æ—à–ª–∞ –æ—à–∏–±–∫–∞ –ø—Ä–∏ –ø—Ä–æ–≤–µ—Ä–∫–µ —Ä–µ—à–µ–Ω–∏—è: ' + error.message);
        });
    }

    function displayResults(data) {
        // –ü–æ–∫–∞–∑–∞—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã
        document.getElementById('results').style.display = 'block';
        
        // –†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
        displayTestResults(data.test_results);
        
        // –ê–Ω–∞–ª–∏–∑ –∫–æ–¥–∞
        displayCodeAnalysis(data.analysis);
        
        // –ò—Ç–æ–≥–æ–≤–∞—è –æ—Ü–µ–Ω–∫–∞
        displayFinalScore(data.score);
    }

    function displayTestResults(testResults) {
        const container = document.getElementById('testResultsContent');
        
        if (!testResults || testResults.length === 0) {
            container.innerHTML = '<p class="text-muted">–ù–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è</p>';
            return;
        }

        const passedTests = testResults.filter(test => test.passed).length;
        const totalTests = testResults.length;
        
        let html = `
            <div class="mb-3">
                <h6>–†–µ–∑—É–ª—å—Ç–∞—Ç—ã: ${passedTests}/${totalTests} —Ç–µ—Å—Ç–æ–≤ –ø—Ä–æ–π–¥–µ–Ω–æ</h6>
                <div class="progress mb-3">
                    <div class="progress-bar ${passedTests === totalTests ? 'bg-success' : 'bg-warning'}" 
                         style="width: ${(passedTests / totalTests) * 100}%">
                    </div>
                </div>
            </div>
        `;

        testResults.forEach((test, index) => {
            const testClass = test.passed ? 'test-passed' : 'test-failed';
            const icon = test.passed ? 'fa-check-circle text-success' : 'fa-times-circle text-danger';
            
            html += `
                <div class="test-result ${testClass} p-3 rounded mb-2">
                    <div class="d-flex justify-content-between align-items-start">
                        <div class="flex-grow-1">
                            <h6 class="mb-2">
                                <i class="fas ${icon} me-2"></i>
                                –¢–µ—Å—Ç ${index + 1} ${test.passed ? '–ø—Ä–æ–π–¥–µ–Ω' : '–Ω–µ –ø—Ä–æ–π–¥–µ–Ω'}
                            </h6>
                            <div class="row">
                                <div class="col-md-4">
                                    <strong>–í—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ:</strong><br>
                                    <code>${test.input}</code>
                                </div>
                                <div class="col-md-4">
                                    <strong>–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:</strong><br>
                                    <code>${test.expected}</code>
                                </div>
                                <div class="col-md-4">
                                    <strong>–ü–æ–ª—É—á–µ–Ω–Ω—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:</strong><br>
                                    <code>${test.actual || '–û—à–∏–±–∫–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è'}</code>
                                </div>
                            </div>
                            ${test.error ? `<div class="mt-2"><strong>–û—à–∏–±–∫–∞:</strong> <code>${test.error}</code></div>` : ''}
                        </div>
                        <div class="text-end">
                            <small class="text-muted">${formatExecutionTime(test.execution_time)}</small>
                        </div>
                    </div>
                </div>
            `;
        });

        container.innerHTML = html;
    }

    function displayCodeAnalysis(analysis) {
        const container = document.getElementById('analysisContent');
        
        let html = `
            <div class="row">
                <div class="col-md-6">
                    <h6>–û—Å–Ω–æ–≤–Ω—ã–µ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏:</h6>
                    <ul class="list-unstyled">
                        <li><strong>–°—Ç—Ä–æ–∫ –∫–æ–¥–∞:</strong> ${analysis.lines_of_code}</li>
                        <li><strong>–§—É–Ω–∫—Ü–∏–π:</strong> ${analysis.functions_count}</li>
                        <li><strong>–°–ª–æ–∂–Ω–æ—Å—Ç—å:</strong> ${analysis.complexity_score.toFixed(2)}</li>
                        <li><strong>–°–∏–Ω—Ç–∞–∫—Å–∏—Å:</strong> 
                            <span class="badge bg-${analysis.syntax_valid ? 'success' : 'danger'}">
                                ${analysis.syntax_valid ? '–ö–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π' : '–û—à–∏–±–∫–∏'}
                            </span>
                        </li>
                    </ul>
                </div>
                <div class="col-md-6">
                    <h6>–û—Ü–µ–Ω–∫–∏ –∫–∞—á–µ—Å—Ç–≤–∞ (–Ω–µ–π—Ä–æ–Ω–Ω–∞—è —Å–µ—Ç—å):</h6>
                    <div class="mb-2">
                        <strong>–ü—Ä–∞–≤–∏–ª—å–Ω–æ—Å—Ç—å:</strong> 
                        <span class="quality-score ${getScoreClass(analysis.quality_scores.correctness * 100)}">
                            ${(analysis.quality_scores.correctness * 100).toFixed(1)}%
                        </span>
                    </div>
                    <div class="mb-2">
                        <strong>–≠—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å:</strong> 
                        <span class="quality-score ${getScoreClass(analysis.quality_scores.efficiency * 100)}">
                            ${(analysis.quality_scores.efficiency * 100).toFixed(1)}%
                        </span>
                    </div>
                    <div class="mb-2">
                        <strong>–ß–∏—Ç–∞–µ–º–æ—Å—Ç—å:</strong> 
                        <span class="quality-score ${getScoreClass(analysis.quality_scores.readability * 100)}">
                            ${(analysis.quality_scores.readability * 100).toFixed(1)}%
                        </span>
                    </div>
                </div>
            </div>
        `;

        if (analysis.suggestions && analysis.suggestions.length > 0) {
            html += `
                <div class="mt-3">
                    <h6>–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ —É–ª—É—á—à–µ–Ω–∏—é:</h6>
                    <ul class="list-unstyled">
                        ${analysis.suggestions.map(suggestion => 
                            `<li><i class="fas fa-lightbulb text-warning me-2"></i>${suggestion}</li>`
                        ).join('')}
                    </ul>
                </div>
            `;
        }

        container.innerHTML = html;
    }

    function displayFinalScore(score) {
        const container = document.getElementById('scoreContent');
        
        const scoreClass = getScoreClass(score);
        const scoreText = score >= 90 ? '–û—Ç–ª–∏—á–Ω–æ!' : 
                         score >= 70 ? '–•–æ—Ä–æ—à–æ!' : 
                         score >= 50 ? '–£–¥–æ–≤–ª–µ—Ç–≤–æ—Ä–∏—Ç–µ–ª—å–Ω–æ' : '–¢—Ä–µ–±—É–µ—Ç –¥–æ—Ä–∞–±–æ—Ç–∫–∏';
        
        container.innerHTML = `
            <div class="mb-3">
                <div class="quality-score ${scoreClass} display-4">
                    ${score.toFixed(1)}%
                </div>
                <h5 class="mt-2">${scoreText}</h5>
            </div>
            
            <div class="mt-3">
                <button type="button" class="btn btn-outline-primary me-2" onclick="checkSolution()">
                    <i class="fas fa-redo me-2"></i>–ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–Ω–æ–≤–∞
                </button>
                <a href="{{ url_for('main.list_tasks') }}" class="btn btn-primary">
                    <i class="fas fa-list me-2"></i>–ö —Å–ø–∏—Å–∫—É –∑–∞–¥–∞–Ω–∏–π
                </a>
            </div>
        `;
    }

    function clearCode() {
        // –û—á–∏—â–∞–µ–º –∫–æ–¥ –ø–æ–ª–Ω–æ—Å—Ç—å—é (–Ω–µ –≤–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º —à–∞–±–ª–æ–Ω)
        if (useCodeMirror && codeEditor) {
            codeEditor.setValue('');
            codeEditor.focus();
        } else {
            document.getElementById('codeEditor').value = '';
            document.getElementById('codeEditor').focus();
        }
        
        // –°–∫—Ä—ã–≤–∞–µ–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –ø—Ä–µ–¥—ã–¥—É—â–µ–π –ø—Ä–æ–≤–µ—Ä–∫–∏
        document.getElementById('results').style.display = 'none';
    }
    
    function showHint() {
        // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —Å—Ç—Ä—É–∫—Ç—É—Ä—É —Ä–µ—à–µ–Ω–∏—è (—à–∞–±–ª–æ–Ω)
        const template = `{{ task.solution_template|e|replace('\n', '\\n')|replace('\r', '\\r')|replace('"', '\\"') }}`;
        
        if (confirm('–ü–æ–∫–∞–∑–∞—Ç—å —Å—Ç—Ä—É–∫—Ç—É—Ä—É —Ä–µ—à–µ–Ω–∏—è?\n\n–≠—Ç–æ –∑–∞–ø–æ–ª–Ω–∏—Ç –ø–æ–ª–µ —Ä–µ–¥–∞–∫—Ç–æ—Ä–∞ –ø—Ä–∏–º–µ—Ä–æ–º —Ä–µ—à–µ–Ω–∏—è.')) {
            if (useCodeMirror && codeEditor) {
                codeEditor.setValue(template);
                codeEditor.focus();
            } else {
                document.getElementById('codeEditor').value = template;
                document.getElementById('codeEditor').focus();
            }
        }
    }
</script>
{% endblock %}
